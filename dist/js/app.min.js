/*! HTML5_2D_Shooter 06-02-2014 */

function Drawable(){this.init=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},this.speed=0,this.canvasWidth=0,this.canvasHeight=0,this.draw=function(){},this.move=function(){}}function MainCharacter(){this.speed={x:3,y:8};var a=15,b=0,c=!1,d=15,e=0;this.init=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d,this.alive=!0},this.draw=function(){this.context.drawImage(imgRepo.main,this.x,this.y)},this.move=function(){b++,(KEY_STATUS.left||KEY_STATUS.right||KEY_STATUS.up||c)&&(this.context.clearRect(this.x,this.y,this.width,this.height),KEY_STATUS.left?(this.x-=this.speed.x,this.x<=0&&(this.x=0)):KEY_STATUS.right&&(this.x+=this.speed.x,this.x>=this.canvasWidth-this.width&&(this.x=this.canvasWidth-this.width)),KEY_STATUS.up&&!c&&(c=!0)),c&&this.jump(),this.draw(),KEY_STATUS.space&&b>=a&&(this.fire(),b=0)},this.fire=function(){},this.jump=function(){e++,e===d&&(this.speed.y=-this.speed.y),e===2*d&&(this.speed.y=-this.speed.y,c=!1,e=0),this.y-=this.speed.y,this.y>this.canvasHeight-10&&(this.y=this.canvasHeight-10)}}function init(){game.init()&&game.start()}function Game(){this.init=function(){return this.bgCanvas=document.getElementById("bg"),this.enemiesCanvas=document.getElementById("enemies"),this.mainCanvas=document.getElementById("main"),this.obstaclesCanvas=document.getElementById("obstacles"),this.bgCanvas.getContext?(this.bgContext=this.bgCanvas.getContext("2d"),this.enemiesContext=this.enemiesCanvas.getContext("2d"),this.mainContext=this.mainCanvas.getContext("2d"),this.obstaclesContext=this.obstaclesCanvas.getContext("2d"),MainCharacter.prototype.context=this.mainContext,MainCharacter.prototype.canvasWidth=this.mainCanvas.width,MainCharacter.prototype.canvasHeight=this.mainCanvas.height,this.mainCharacter=new MainCharacter,this.mainCharacter.init(10,this.mainCanvas.height-imgRepo.main.height,imgRepo.main.width,imgRepo.main.height),!0):!1},this.start=function(){console.log("START"),this.mainCharacter.draw(),animate()}}function animate(){requestAnimFrame(animate),game.mainCharacter.move()}function ImgRepo(){function a(){return d++,new Image}function b(){c++,c===d&&(console.log("all images loaded"),window.init())}var c=0,d=0;this.bullet=a(),this.main=a(),this.enemy_1=a(),this.enemy_2=a(),this.bullet.onload=function(){b()},this.main.onload=function(){b()},this.enemy_1.onload=function(){b()},this.enemy_2.onload=function(){b()},this.bullet.src="./img/bullet_main.png",this.main.src="./img/main.png",this.enemy_1.src="./img/enemy_1.png",this.enemy_2.src="./img/enemy_2.png"}MainCharacter.prototype=new Drawable;var game=new Game,imgRepo=new ImgRepo;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),KEY_CODES={32:"space",37:"left",38:"up",39:"right"},KEY_STATUS={};for(var code in KEY_CODES)KEY_STATUS[KEY_CODES[code]]=!1;document.onkeydown=function(a){var b=a.keyCode?a.keyCode:a.charCode;KEY_CODES[b]&&(a.preventDefault(),KEY_STATUS[KEY_CODES[b]]=!0)},document.onkeyup=function(a){var b=a.keyCode?a.keyCode:a.charCode;KEY_CODES[b]&&(a.preventDefault(),KEY_STATUS[KEY_CODES[b]]=!1)};
//# sourceMappingURL=app.min.map